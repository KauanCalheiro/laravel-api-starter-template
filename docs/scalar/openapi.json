{
  "openapi": "3.1.0",
  "info": {
    "title": "Laravel API Starter",
    "version": "1.0.0",
    "description": "HTTP API for authentication, user management."
  },
  "servers": [
    {
      "url": "http://localhost:8000/api/v1"
    }
  ],
  "tags": [
    {
      "name": "Auth",
      "description": "Authentication and session management"
    },
    {
      "name": "Users",
      "description": "User CRUD and profile endpoints"
    },
    {
      "name": "User Roles",
      "description": "Role assignment helpers for users"
    },
    {
      "name": "Countries",
      "description": "Country registry"
    },
    {
      "name": "States",
      "description": "State/region registry"
    },
    {
      "name": "Cities",
      "description": "City registry"
    }
  ],
  "paths": {
    "/auth/login": {
      "post": {
        "tags": [
          "Auth"
        ],
        "summary": "Authenticate with email and password",
        "description": "Validates the provided credentials and returns a JWT token.",
        "operationId": "loginWithEmail",
        "security": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/LoginInput"
              },
              "example": {
                "email": "admin@example.com",
                "password": "admin",
                "remember_me": true
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Authentication token",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AuthToken"
                },
                "example": {
                  "token": "eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9..."
                }
              }
            }
          },
          "401": {
            "$ref": "#/components/responses/UnauthorizedError"
          },
          "422": {
            "$ref": "#/components/responses/ValidationError"
          },
          "500": {
            "$ref": "#/components/responses/ServerError"
          }
        }
      }
    },
    "/auth/register": {
      "post": {
        "tags": [
          "Auth"
        ],
        "summary": "Register a new user",
        "description": "Creates a new user account and immediately returns a JWT token for the created user.",
        "operationId": "registerUser",
        "security": [],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/RegisterInput"
              },
              "example": {
                "name": "Admin",
                "email": "admin@example.com",
                "password": "admin",
                "password_confirmation": "admin"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Authentication token",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AuthToken"
                },
                "example": {
                  "token": "eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9..."
                }
              }
            }
          },
          "422": {
            "$ref": "#/components/responses/ValidationError"
          },
          "500": {
            "$ref": "#/components/responses/ServerError"
          }
        }
      }
    },
    "/auth/user": {
      "get": {
        "tags": [
          "Auth"
        ],
        "summary": "Get the authenticated user",
        "operationId": "getAuthenticatedUser",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Authenticated user profile",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AuthUser"
                },
                "example": {
                  "id": 1,
                  "name": "Admin",
                  "email": "admin@example.com",
                  "active_role": "admin",
                  "roles": [
                    "admin",
                    "user"
                  ],
                  "permissions": [
                    "user.create",
                    "user.read",
                    "user.update",
                    "user.delete"
                  ]
                }
              }
            }
          },
          "401": {
            "$ref": "#/components/responses/UnauthorizedError"
          }
        }
      }
    },
    "/auth/logout": {
      "post": {
        "tags": [
          "Auth"
        ],
        "summary": "Logout",
        "operationId": "logoutUser",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Logout confirmation",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/MessageResponse"
                },
                "example": {
                  "message": "Logged out successfully"
                }
              }
            }
          },
          "401": {
            "$ref": "#/components/responses/UnauthorizedError"
          }
        }
      }
    },
    "/auth/active-role": {
      "post": {
        "tags": [
          "Auth"
        ],
        "summary": "Set active role",
        "description": "Updates the authenticated user's active role to one of the roles already granted to them.",
        "operationId": "setActiveRole",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ActiveRoleInput"
              },
              "example": {
                "role": "admin"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Updated authenticated user",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AuthUser"
                }
              }
            }
          },
          "401": {
            "$ref": "#/components/responses/UnauthorizedError"
          },
          "422": {
            "$ref": "#/components/responses/ValidationError"
          }
        }
      }
    },
    "/user": {
      "get": {
        "tags": [
          "Users"
        ],
        "summary": "List users",
        "operationId": "listUsers",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "$ref": "#/components/parameters/FilterUserId"
          },
          {
            "$ref": "#/components/parameters/FilterUserName"
          },
          {
            "$ref": "#/components/parameters/FilterUserEmail"
          },
          {
            "$ref": "#/components/parameters/FilterUserSearch"
          },
          {
            "$ref": "#/components/parameters/IncludeUsers"
          },
          {
            "$ref": "#/components/parameters/SortUsers"
          },
          {
            "$ref": "#/components/parameters/PageSize"
          },
          {
            "$ref": "#/components/parameters/PageNumber"
          }
        ],
        "responses": {
          "200": {
            "description": "Paginated list of users",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PaginatedUsers"
                }
              }
            }
          },
          "401": {
            "$ref": "#/components/responses/UnauthorizedError"
          }
        }
      },
      "post": {
        "tags": [
          "Users"
        ],
        "summary": "Create user",
        "operationId": "createUser",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UserInput"
              },
              "example": {
                "name": "Jane Doe",
                "email": "jane@example.com",
                "password": "admin",
                "password_confirmation": "admin"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Created user",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/User"
                }
              }
            }
          },
          "401": {
            "$ref": "#/components/responses/UnauthorizedError"
          },
          "422": {
            "$ref": "#/components/responses/ValidationError"
          }
        }
      }
    },
    "/user/{user}": {
      "parameters": [
        {
          "$ref": "#/components/parameters/UserIdPath"
        }
      ],
      "get": {
        "tags": [
          "Users"
        ],
        "summary": "Get user by id",
        "operationId": "getUserById",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "$ref": "#/components/parameters/IncludeUsers"
          }
        ],
        "responses": {
          "200": {
            "description": "User details",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/User"
                }
              }
            }
          },
          "401": {
            "$ref": "#/components/responses/UnauthorizedError"
          },
          "404": {
            "$ref": "#/components/responses/NotFoundError"
          }
        }
      },
      "put": {
        "tags": [
          "Users"
        ],
        "summary": "Update user",
        "operationId": "updateUser",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UserUpdateInput"
              },
              "example": {
                "name": "Jane Doe",
                "email": "jane.updated@example.com"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Updated user",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/User"
                }
              }
            }
          },
          "401": {
            "$ref": "#/components/responses/UnauthorizedError"
          },
          "404": {
            "$ref": "#/components/responses/NotFoundError"
          },
          "422": {
            "$ref": "#/components/responses/ValidationError"
          }
        }
      },
      "patch": {
        "tags": [
          "Users"
        ],
        "summary": "Partially update user",
        "operationId": "patchUser",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UserUpdateInput"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Updated user",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/User"
                }
              }
            }
          },
          "401": {
            "$ref": "#/components/responses/UnauthorizedError"
          },
          "404": {
            "$ref": "#/components/responses/NotFoundError"
          },
          "422": {
            "$ref": "#/components/responses/ValidationError"
          }
        }
      },
      "delete": {
        "tags": [
          "Users"
        ],
        "summary": "Delete user",
        "operationId": "deleteUser",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "204": {
            "description": "User removed"
          },
          "401": {
            "$ref": "#/components/responses/UnauthorizedError"
          },
          "404": {
            "$ref": "#/components/responses/NotFoundError"
          }
        }
      }
    },
    "/user/{user}/roles/assign": {
      "parameters": [
        {
          "$ref": "#/components/parameters/UserIdPath"
        }
      ],
      "post": {
        "tags": [
          "User Roles"
        ],
        "summary": "Assign roles to user",
        "operationId": "assignRolesToUser",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/AssignRolesInput"
              },
              "example": {
                "roles": [
                  "admin",
                  "user"
                ]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "User with updated roles",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/User"
                }
              }
            }
          },
          "401": {
            "$ref": "#/components/responses/UnauthorizedError"
          },
          "404": {
            "$ref": "#/components/responses/NotFoundError"
          },
          "422": {
            "$ref": "#/components/responses/ValidationError"
          }
        }
      }
    },
    "/user/{user}/roles/revoke": {
      "parameters": [
        {
          "$ref": "#/components/parameters/UserIdPath"
        }
      ],
      "post": {
        "tags": [
          "User Roles"
        ],
        "summary": "Revoke roles from user",
        "operationId": "revokeRolesFromUser",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/AssignRolesInput"
              },
              "example": {
                "roles": [
                  "user"
                ]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "User with updated roles",
            "content": {
              "application/json": {
                "$ref": "#/components/schemas/User"
              }
            }
          },
          "401": {
            "$ref": "#/components/responses/UnauthorizedError"
          },
          "404": {
            "$ref": "#/components/responses/NotFoundError"
          },
          "422": {
            "$ref": "#/components/responses/ValidationError"
          }
        }
      }
    },
    "/user/{user}/roles/sync": {
      "parameters": [
        {
          "$ref": "#/components/parameters/UserIdPath"
        }
      ],
      "post": {
        "tags": [
          "User Roles"
        ],
        "summary": "Sync roles on user",
        "operationId": "syncRolesOnUser",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/AssignRolesInput"
              },
              "example": {
                "roles": [
                  "manager",
                  "user"
                ]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "User with synced roles",
            "content": {
              "application/json": {
                "$ref": "#/components/schemas/User"
              }
            }
          },
          "401": {
            "$ref": "#/components/responses/UnauthorizedError"
          },
          "404": {
            "$ref": "#/components/responses/NotFoundError"
          },
          "422": {
            "$ref": "#/components/responses/ValidationError"
          }
        }
      }
    },
    "/country": {
      "get": {
        "tags": [
          "Countries"
        ],
        "summary": "List countries",
        "operationId": "listCountries",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "$ref": "#/components/parameters/FilterCountryName"
          },
          {
            "$ref": "#/components/parameters/FilterCountryCode"
          },
          {
            "$ref": "#/components/parameters/FilterCountrySearch"
          },
          {
            "$ref": "#/components/parameters/PageSize"
          },
          {
            "$ref": "#/components/parameters/PageNumber"
          }
        ],
        "responses": {
          "200": {
            "description": "Paginated list of countries",
            "content": {
              "application/json": {
                "$ref": "#/components/schemas/PaginatedCountries"
              }
            }
          },
          "401": {
            "$ref": "#/components/responses/UnauthorizedError"
          }
        }
      },
      "post": {
        "tags": [
          "Countries"
        ],
        "summary": "Create country",
        "operationId": "createCountry",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CountryInput"
              },
              "example": {
                "name": "BRAZIL",
                "code": "BRA"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Created country",
            "content": {
              "application/json": {
                "$ref": "#/components/schemas/Country"
              }
            }
          },
          "401": {
            "$ref": "#/components/responses/UnauthorizedError"
          },
          "422": {
            "$ref": "#/components/responses/ValidationError"
          }
        }
      }
    },
    "/country/{country}": {
      "parameters": [
        {
          "$ref": "#/components/parameters/CountryIdPath"
        }
      ],
      "get": {
        "tags": [
          "Countries"
        ],
        "summary": "Get country",
        "operationId": "getCountry",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Country details",
            "content": {
              "application/json": {
                "$ref": "#/components/schemas/Country"
              }
            }
          },
          "401": {
            "$ref": "#/components/responses/UnauthorizedError"
          },
          "404": {
            "$ref": "#/components/responses/NotFoundError"
          }
        }
      },
      "put": {
        "tags": [
          "Countries"
        ],
        "summary": "Update country",
        "operationId": "updateCountry",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CountryUpdateInput"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Updated country",
            "content": {
              "application/json": {
                "$ref": "#/components/schemas/Country"
              }
            }
          },
          "401": {
            "$ref": "#/components/responses/UnauthorizedError"
          },
          "404": {
            "$ref": "#/components/responses/NotFoundError"
          },
          "422": {
            "$ref": "#/components/responses/ValidationError"
          }
        }
      },
      "patch": {
        "tags": [
          "Countries"
        ],
        "summary": "Partially update country",
        "operationId": "patchCountry",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CountryUpdateInput"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Updated country",
            "content": {
              "application/json": {
                "$ref": "#/components/schemas/Country"
              }
            }
          },
          "401": {
            "$ref": "#/components/responses/UnauthorizedError"
          },
          "404": {
            "$ref": "#/components/responses/NotFoundError"
          },
          "422": {
            "$ref": "#/components/responses/ValidationError"
          }
        }
      },
      "delete": {
        "tags": [
          "Countries"
        ],
        "summary": "Delete country",
        "operationId": "deleteCountry",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "204": {
            "description": "Country removed"
          },
          "401": {
            "$ref": "#/components/responses/UnauthorizedError"
          },
          "404": {
            "$ref": "#/components/responses/NotFoundError"
          }
        }
      }
    },
    "/state": {
      "get": {
        "tags": [
          "States"
        ],
        "summary": "List states",
        "operationId": "listStates",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "$ref": "#/components/parameters/FilterStateName"
          },
          {
            "$ref": "#/components/parameters/FilterStateCode"
          },
          {
            "$ref": "#/components/parameters/FilterStateSearch"
          },
          {
            "$ref": "#/components/parameters/IncludeStates"
          },
          {
            "$ref": "#/components/parameters/PageSize"
          },
          {
            "$ref": "#/components/parameters/PageNumber"
          }
        ],
        "responses": {
          "200": {
            "description": "Paginated list of states",
            "content": {
              "application/json": {
                "$ref": "#/components/schemas/PaginatedStates"
              }
            }
          },
          "401": {
            "$ref": "#/components/responses/UnauthorizedError"
          }
        }
      },
      "post": {
        "tags": [
          "States"
        ],
        "summary": "Create state",
        "operationId": "createState",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/StateInput"
              },
              "example": {
                "name": "SAO PAULO",
                "code": "SP",
                "country_id": 1
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Created state",
            "content": {
              "application/json": {
                "$ref": "#/components/schemas/State"
              }
            }
          },
          "401": {
            "$ref": "#/components/responses/UnauthorizedError"
          },
          "422": {
            "$ref": "#/components/responses/ValidationError"
          }
        }
      }
    },
    "/state/{state}": {
      "parameters": [
        {
          "$ref": "#/components/parameters/StateIdPath"
        }
      ],
      "get": {
        "tags": [
          "States"
        ],
        "summary": "Get state",
        "operationId": "getState",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "$ref": "#/components/parameters/IncludeStates"
          }
        ],
        "responses": {
          "200": {
            "description": "State details",
            "content": {
              "application/json": {
                "$ref": "#/components/schemas/State"
              }
            }
          },
          "401": {
            "$ref": "#/components/responses/UnauthorizedError"
          },
          "404": {
            "$ref": "#/components/responses/NotFoundError"
          }
        }
      },
      "put": {
        "tags": [
          "States"
        ],
        "summary": "Update state",
        "operationId": "updateState",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/StateUpdateInput"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Updated state",
            "content": {
              "application/json": {
                "$ref": "#/components/schemas/State"
              }
            }
          },
          "401": {
            "$ref": "#/components/responses/UnauthorizedError"
          },
          "404": {
            "$ref": "#/components/responses/NotFoundError"
          },
          "422": {
            "$ref": "#/components/responses/ValidationError"
          }
        }
      },
      "patch": {
        "tags": [
          "States"
        ],
        "summary": "Partially update state",
        "operationId": "patchState",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/StateUpdateInput"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Updated state",
            "content": {
              "application/json": {
                "$ref": "#/components/schemas/State"
              }
            }
          },
          "401": {
            "$ref": "#/components/responses/UnauthorizedError"
          },
          "404": {
            "$ref": "#/components/responses/NotFoundError"
          },
          "422": {
            "$ref": "#/components/responses/ValidationError"
          }
        }
      },
      "delete": {
        "tags": [
          "States"
        ],
        "summary": "Delete state",
        "operationId": "deleteState",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "204": {
            "description": "State removed"
          },
          "401": {
            "$ref": "#/components/responses/UnauthorizedError"
          },
          "404": {
            "$ref": "#/components/responses/NotFoundError"
          }
        }
      }
    },
    "/city": {
      "get": {
        "tags": [
          "Cities"
        ],
        "summary": "List cities",
        "operationId": "listCities",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "$ref": "#/components/parameters/FilterCityName"
          },
          {
            "$ref": "#/components/parameters/FilterCityStateName"
          },
          {
            "$ref": "#/components/parameters/FilterCityStateCode"
          },
          {
            "$ref": "#/components/parameters/FilterCityStateId"
          },
          {
            "$ref": "#/components/parameters/FilterCitySearch"
          },
          {
            "$ref": "#/components/parameters/IncludeCities"
          },
          {
            "$ref": "#/components/parameters/PageSize"
          },
          {
            "$ref": "#/components/parameters/PageNumber"
          }
        ],
        "responses": {
          "200": {
            "description": "Paginated list of cities",
            "content": {
              "application/json": {
                "$ref": "#/components/schemas/PaginatedCities"
              }
            }
          },
          "401": {
            "$ref": "#/components/responses/UnauthorizedError"
          }
        }
      },
      "post": {
        "tags": [
          "Cities"
        ],
        "summary": "Create city",
        "operationId": "createCity",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CityInput"
              },
              "example": {
                "name": "SAO PAULO",
                "state_id": 1
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Created city",
            "content": {
              "application/json": {
                "$ref": "#/components/schemas/City"
              }
            }
          },
          "401": {
            "$ref": "#/components/responses/UnauthorizedError"
          },
          "422": {
            "$ref": "#/components/responses/ValidationError"
          }
        }
      }
    },
    "/city/{city}": {
      "parameters": [
        {
          "$ref": "#/components/parameters/CityIdPath"
        }
      ],
      "get": {
        "tags": [
          "Cities"
        ],
        "summary": "Get city",
        "operationId": "getCity",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "$ref": "#/components/parameters/IncludeCities"
          }
        ],
        "responses": {
          "200": {
            "description": "City details",
            "content": {
              "application/json": {
                "$ref": "#/components/schemas/City"
              }
            }
          },
          "401": {
            "$ref": "#/components/responses/UnauthorizedError"
          },
          "404": {
            "$ref": "#/components/responses/NotFoundError"
          }
        }
      },
      "put": {
        "tags": [
          "Cities"
        ],
        "summary": "Update city",
        "operationId": "updateCity",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CityUpdateInput"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Updated city",
            "content": {
              "application/json": {
                "$ref": "#/components/schemas/City"
              }
            }
          },
          "401": {
            "$ref": "#/components/responses/UnauthorizedError"
          },
          "404": {
            "$ref": "#/components/responses/NotFoundError"
          },
          "422": {
            "$ref": "#/components/responses/ValidationError"
          }
        }
      },
      "patch": {
        "tags": [
          "Cities"
        ],
        "summary": "Partially update city",
        "operationId": "patchCity",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CityUpdateInput"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Updated city",
            "content": {
              "application/json": {
                "$ref": "#/components/schemas/City"
              }
            }
          },
          "401": {
            "$ref": "#/components/responses/UnauthorizedError"
          },
          "404": {
            "$ref": "#/components/responses/NotFoundError"
          },
          "422": {
            "$ref": "#/components/responses/ValidationError"
          }
        }
      },
      "delete": {
        "tags": [
          "Cities"
        ],
        "summary": "Delete city",
        "operationId": "deleteCity",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "204": {
            "description": "City removed"
          },
          "401": {
            "$ref": "#/components/responses/UnauthorizedError"
          },
          "404": {
            "$ref": "#/components/responses/NotFoundError"
          }
        }
      }
    }
  },
  "components": {
    "schemas": {
      "LoginInput": {
        "type": "object",
        "required": [
          "email",
          "password"
        ],
        "properties": {
          "email": {
            "type": "string",
            "format": "email",
            "example": "admin@example.com"
          },
          "password": {
            "type": "string",
            "description": "User password",
            "example": "admin"
          },
          "remember_me": {
            "type": "boolean",
            "description": "Keeps the session alive for longer if true."
          },
          "driver": {
            "type": "string",
            "enum": [
              "jwt"
            ],
            "default": "jwt",
            "description": "Authentication driver. Only jwt is supported."
          }
        }
      },
      "RegisterInput": {
        "type": "object",
        "required": [
          "name",
          "email",
          "password",
          "password_confirmation"
        ],
        "properties": {
          "name": {
            "type": "string",
            "maxLength": 255,
            "example": "Admin"
          },
          "email": {
            "type": "string",
            "format": "email",
            "example": "admin@example.com"
          },
          "password": {
            "type": "string",
            "minLength": 8,
            "example": "admin"
          },
          "password_confirmation": {
            "type": "string",
            "description": "Must match the password field"
          }
        }
      },
      "AuthToken": {
        "type": "object",
        "required": [
          "token"
        ],
        "properties": {
          "token": {
            "type": "string",
            "description": "JWT token"
          }
        }
      },
      "AuthUser": {
        "type": "object",
        "required": [
          "id",
          "name",
          "email",
          "active_role",
          "roles",
          "permissions"
        ],
        "properties": {
          "id": {
            "type": "integer",
            "example": 1
          },
          "name": {
            "type": "string",
            "example": "Admin"
          },
          "email": {
            "type": "string",
            "format": "email",
            "example": "admin@example.com"
          },
          "active_role": {
            "type": "string",
            "example": "admin"
          },
          "roles": {
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "permissions": {
            "type": "array",
            "items": {
              "type": "string"
            }
          }
        }
      },
      "MessageResponse": {
        "type": "object",
        "required": [
          "message"
        ],
        "properties": {
          "message": {
            "type": "string"
          }
        }
      },
      "User": {
        "type": "object",
        "required": [
          "id",
          "name",
          "email"
        ],
        "properties": {
          "id": {
            "type": "integer",
            "example": 1
          },
          "name": {
            "type": "string",
            "example": "Admin"
          },
          "email": {
            "type": "string",
            "format": "email",
            "example": "admin@example.com"
          },
          "roles": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "Returned when ?include=roles is provided.",
            "nullable": true
          },
          "roles_count": {
            "type": "integer",
            "nullable": true,
            "description": "Returned when the roles count is requested."
          },
          "roles_exists": {
            "type": "boolean",
            "nullable": true,
            "description": "Returned when the roles existence flag is requested."
          }
        }
      },
      "UserInput": {
        "type": "object",
        "required": [
          "name",
          "email",
          "password",
          "password_confirmation"
        ],
        "properties": {
          "name": {
            "type": "string",
            "maxLength": 255
          },
          "email": {
            "type": "string",
            "format": "email"
          },
          "password": {
            "type": "string",
            "minLength": 8
          },
          "password_confirmation": {
            "type": "string"
          }
        }
      },
      "UserUpdateInput": {
        "type": "object",
        "required": [
          "name",
          "email"
        ],
        "properties": {
          "name": {
            "type": "string",
            "maxLength": 255
          },
          "email": {
            "type": "string",
            "format": "email"
          }
        }
      },
      "AssignRolesInput": {
        "type": "object",
        "required": [
          "roles"
        ],
        "properties": {
          "roles": {
            "type": "array",
            "minItems": 1,
            "items": {
              "type": "string"
            }
          }
        }
      },
      "ActiveRoleInput": {
        "type": "object",
        "required": [
          "role"
        ],
        "properties": {
          "role": {
            "type": "string",
            "description": "Role slug that already belongs to the authenticated user"
          }
        }
      },
      "Country": {
        "type": "object",
        "required": [
          "id",
          "name",
          "code"
        ],
        "properties": {
          "id": {
            "type": "integer",
            "example": 1
          },
          "name": {
            "type": "string",
            "example": "BRAZIL"
          },
          "code": {
            "type": "string",
            "maxLength": 3,
            "example": "BRA"
          }
        }
      },
      "CountryInput": {
        "type": "object",
        "required": [
          "name",
          "code"
        ],
        "properties": {
          "name": {
            "type": "string",
            "maxLength": 255,
            "description": "Will be uppercased automatically"
          },
          "code": {
            "type": "string",
            "maxLength": 3,
            "description": "ISO-like uppercase code"
          }
        }
      },
      "CountryUpdateInput": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string",
            "maxLength": 255
          },
          "code": {
            "type": "string",
            "maxLength": 3
          }
        }
      },
      "State": {
        "type": "object",
        "required": [
          "id",
          "name",
          "code",
          "country_id"
        ],
        "properties": {
          "id": {
            "type": "integer"
          },
          "name": {
            "type": "string",
            "example": "SAO PAULO"
          },
          "code": {
            "type": "string",
            "maxLength": 2,
            "example": "SP"
          },
          "country_id": {
            "type": "integer"
          },
          "country": {
            "$ref": "#/components/schemas/Country"
          }
        }
      },
      "StateInput": {
        "type": "object",
        "required": [
          "name",
          "code",
          "country_id"
        ],
        "properties": {
          "name": {
            "type": "string",
            "maxLength": 255
          },
          "code": {
            "type": "string",
            "maxLength": 2
          },
          "country_id": {
            "type": "integer"
          }
        }
      },
      "StateUpdateInput": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string",
            "maxLength": 255
          },
          "code": {
            "type": "string",
            "maxLength": 2
          },
          "country_id": {
            "type": "integer"
          }
        }
      },
      "City": {
        "type": "object",
        "required": [
          "id",
          "name",
          "state_id"
        ],
        "properties": {
          "id": {
            "type": "integer"
          },
          "name": {
            "type": "string",
            "example": "SAO PAULO"
          },
          "state_id": {
            "type": "integer"
          },
          "state": {
            "$ref": "#/components/schemas/State"
          }
        }
      },
      "CityInput": {
        "type": "object",
        "required": [
          "name",
          "state_id"
        ],
        "properties": {
          "name": {
            "type": "string",
            "maxLength": 255
          },
          "state_id": {
            "type": "integer"
          }
        }
      },
      "CityUpdateInput": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string",
            "maxLength": 255
          },
          "state_id": {
            "type": "integer"
          }
        }
      },
      "PaginatedUsers": {
        "type": "object",
        "properties": {
          "data": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/User"
            }
          },
          "links": {
            "$ref": "#/components/schemas/PaginationLinks"
          },
          "meta": {
            "$ref": "#/components/schemas/PaginationMeta"
          }
        }
      },
      "PaginatedCountries": {
        "type": "object",
        "properties": {
          "data": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/Country"
            }
          },
          "links": {
            "$ref": "#/components/schemas/PaginationLinks"
          },
          "meta": {
            "$ref": "#/components/schemas/PaginationMeta"
          }
        }
      },
      "PaginatedStates": {
        "type": "object",
        "properties": {
          "data": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/State"
            }
          },
          "links": {
            "$ref": "#/components/schemas/PaginationLinks"
          },
          "meta": {
            "$ref": "#/components/schemas/PaginationMeta"
          }
        }
      },
      "PaginatedCities": {
        "type": "object",
        "properties": {
          "data": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/City"
            }
          },
          "links": {
            "$ref": "#/components/schemas/PaginationLinks"
          },
          "meta": {
            "$ref": "#/components/schemas/PaginationMeta"
          }
        }
      },
      "PaginationLinks": {
        "type": "object",
        "properties": {
          "first": {
            "type": "string",
            "format": "uri"
          },
          "last": {
            "type": "string",
            "format": "uri"
          },
          "prev": {
            "type": [
              "string",
              "null"
            ],
            "format": "uri"
          },
          "next": {
            "type": [
              "string",
              "null"
            ],
            "format": "uri"
          }
        }
      },
      "PaginationMeta": {
        "type": "object",
        "properties": {
          "current_page": {
            "type": "integer"
          },
          "from": {
            "type": "integer"
          },
          "last_page": {
            "type": "integer"
          },
          "links": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/PaginationMetaLink"
            }
          },
          "path": {
            "type": "string",
            "format": "uri"
          },
          "per_page": {
            "type": "integer"
          },
          "to": {
            "type": "integer"
          },
          "total": {
            "type": "integer"
          }
        }
      },
      "PaginationMetaLink": {
        "type": "object",
        "properties": {
          "url": {
            "type": [
              "string",
              "null"
            ],
            "format": "uri"
          },
          "label": {
            "type": "string"
          },
          "page": {
            "type": [
              "integer",
              "null"
            ]
          },
          "active": {
            "type": "boolean"
          }
        }
      },
      "ErrorResponse": {
        "type": "object",
        "required": [
          "error"
        ],
        "properties": {
          "error": {
            "type": "string"
          }
        }
      },
      "ValidationErrorResponse": {
        "type": "object",
        "required": [
          "error",
          "errors"
        ],
        "properties": {
          "error": {
            "type": "string"
          },
          "errors": {
            "type": "object",
            "additionalProperties": {
              "type": "array",
              "items": {
                "type": "string"
              }
            }
          }
        }
      }
    },
    "parameters": {
      "UserIdPath": {
        "name": "user",
        "in": "path",
        "required": true,
        "description": "ID of the user",
        "schema": {
          "type": "integer",
          "minimum": 1
        }
      },
      "CountryIdPath": {
        "name": "country",
        "in": "path",
        "required": true,
        "description": "ID of the country",
        "schema": {
          "type": "integer",
          "minimum": 1
        }
      },
      "StateIdPath": {
        "name": "state",
        "in": "path",
        "required": true,
        "description": "ID of the state",
        "schema": {
          "type": "integer",
          "minimum": 1
        }
      },
      "CityIdPath": {
        "name": "city",
        "in": "path",
        "required": true,
        "description": "ID of the city",
        "schema": {
          "type": "integer",
          "minimum": 1
        }
      },
      "FilterUserId": {
        "name": "filter[id]",
        "in": "query",
        "schema": {
          "type": "integer"
        },
        "description": "Filter users by exact id"
      },
      "FilterUserName": {
        "name": "filter[name]",
        "in": "query",
        "schema": {
          "type": "string"
        },
        "description": "Filter users by name"
      },
      "FilterUserEmail": {
        "name": "filter[email]",
        "in": "query",
        "schema": {
          "type": "string",
          "format": "email"
        },
        "description": "Filter users by email"
      },
      "FilterUserSearch": {
        "name": "filter[search]",
        "in": "query",
        "schema": {
          "type": "string"
        },
        "description": "Search users by id or name"
      },
      "IncludeUsers": {
        "name": "include",
        "in": "query",
        "schema": {
          "type": "string",
          "example": "roles"
        },
        "description": "Comma-separated relations to eager load. Allowed value: roles"
      },
      "SortUsers": {
        "name": "sort",
        "in": "query",
        "schema": {
          "type": "string",
          "example": "name,-email"
        },
        "description": "Comma-separated sortable fields (id, name, email). Prefix with - for descending order"
      },
      "PageSize": {
        "name": "page[size]",
        "in": "query",
        "schema": {
          "type": "integer",
          "minimum": 1,
          "example": 10
        },
        "description": "Number of items per page"
      },
      "PageNumber": {
        "name": "page[number]",
        "in": "query",
        "schema": {
          "type": "integer",
          "minimum": 1,
          "example": 1
        },
        "description": "Page number to retrieve"
      },
      "FilterCountryName": {
        "name": "filter[name]",
        "in": "query",
        "schema": {
          "type": "string"
        },
        "description": "Filter countries by name"
      },
      "FilterCountryCode": {
        "name": "filter[code]",
        "in": "query",
        "schema": {
          "type": "string"
        },
        "description": "Filter countries by code"
      },
      "FilterCountrySearch": {
        "name": "filter[search]",
        "in": "query",
        "schema": {
          "type": "string"
        },
        "description": "Search countries by name or code"
      },
      "FilterStateName": {
        "name": "filter[name]",
        "in": "query",
        "schema": {
          "type": "string"
        },
        "description": "Filter states by name"
      },
      "FilterStateCode": {
        "name": "filter[code]",
        "in": "query",
        "schema": {
          "type": "string"
        },
        "description": "Filter states by code"
      },
      "FilterStateSearch": {
        "name": "filter[search]",
        "in": "query",
        "schema": {
          "type": "string"
        },
        "description": "Search states by name, code, or related country"
      },
      "IncludeStates": {
        "name": "include",
        "in": "query",
        "schema": {
          "type": "string",
          "example": "country"
        },
        "description": "Comma-separated relations to eager load. Allowed value: country"
      },
      "FilterCityName": {
        "name": "filter[name]",
        "in": "query",
        "schema": {
          "type": "string"
        },
        "description": "Filter cities by name"
      },
      "FilterCityStateName": {
        "name": "filter[state.name]",
        "in": "query",
        "schema": {
          "type": "string"
        },
        "description": "Filter cities by state name"
      },
      "FilterCityStateCode": {
        "name": "filter[state.code]",
        "in": "query",
        "schema": {
          "type": "string"
        },
        "description": "Filter cities by state code"
      },
      "FilterCityStateId": {
        "name": "filter[state_id]",
        "in": "query",
        "schema": {
          "type": "integer"
        },
        "description": "Filter cities by state id"
      },
      "FilterCitySearch": {
        "name": "filter[search]",
        "in": "query",
        "schema": {
          "type": "string"
        },
        "description": "Search cities by name or state information"
      },
      "IncludeCities": {
        "name": "include",
        "in": "query",
        "schema": {
          "type": "string",
          "example": "state,state.country"
        },
        "description": "Comma-separated relations to eager load. Allowed values: state, state.country"
      }
    },
    "responses": {
      "UnauthorizedError": {
        "description": "Unauthorized",
        "content": {
          "application/json": {
            "schema": {
              "$ref": "#/components/schemas/ErrorResponse"
            },
            "example": {
              "error": "Unauthenticated."
            }
          }
        }
      },
      "ValidationError": {
        "description": "Validation error",
        "content": {
          "application/json": {
            "schema": {
              "$ref": "#/components/schemas/ValidationErrorResponse"
            },
            "example": {
              "error": "The given data was invalid.",
              "errors": {
                "email": [
                  "The email field is required."
                ]
              }
            }
          }
        }
      },
      "NotFoundError": {
        "description": "Not found",
        "content": {
          "application/json": {
            "schema": {
              "$ref": "#/components/schemas/ErrorResponse"
            },
            "example": {
              "error": "The requested resource was not found."
            }
          }
        }
      },
      "ServerError": {
        "description": "Server error",
        "content": {
          "application/json": {
            "schema": {
              "$ref": "#/components/schemas/ErrorResponse"
            },
            "example": {
              "error": "Internal server error."
            }
          }
        }
      }
    },
    "securitySchemes": {
      "bearerAuth": {
        "type": "http",
        "scheme": "bearer",
        "bearerFormat": "JWT"
      }
    }
  }
}